(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-033f6fa6"],{"42b4":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("PcSearchForm",{attrs:{"form-list":e.formList,"search-form":e.searchForm,"action-list":e.actionList},on:{request:function(t){return e.requestTable("reset")}}}),a("PcTable",{ref:"table",attrs:{"request-immediate":!1,"req-params":e.searchForm,"request-api":e.getList,"colum-list":e.columList},scopedSlots:e._u([{key:"enable",fn:function(t){var o=t.row;return[e._l(e.enableStatusAll,(function(t){return[t.value===o.enable?a("el-tag",{key:t.value,attrs:{type:o.enable?"success":"danger","disable-transitions":!0}},[e._v(" "+e._s(t.label)+" ")]):e._e()]}))]}},{key:"role",fn:function(t){var o=t.row;return[e._l(e.roleList,(function(t){return[t.value===o.roleCode?a("el-tag",{key:t.value},[e._v(" "+e._s(t.label)+" ")]):e._e()]}))]}},{key:"action",fn:function(t){var o=t.row;return[a("el-button",{directives:[{name:"epermission",rawName:"v-epermission",value:e.$PAGEBUTTON.SYSTEM.ACCOUNT.EDIT,expression:"$PAGEBUTTON.SYSTEM.ACCOUNT.EDIT"}],attrs:{type:"primary"},on:{click:function(t){return e.edit(o)}}},[e._v(" 编辑 ")]),a("el-button",{directives:[{name:"epermission",rawName:"v-epermission",value:e.$PAGEBUTTON.SYSTEM.ACCOUNT.CHECK,expression:"$PAGEBUTTON.SYSTEM.ACCOUNT.CHECK"}],on:{click:function(t){return e.check(o)}}},[e._v(" 查看 ")])]}}])}),a("AddEdit",{attrs:{disabled:"check"===e.addEditObj.mode,mode:e.addEditObj.mode,data:e.addEditObj.data,title:e.dialogTitle[e.addEditObj.mode],visible:e.addEditObj.visible},on:{"update:visible":function(t){return e.$set(e.addEditObj,"visible",t)},submit:e.requestTable}})],1)},r=[],s=[{label:"全部",value:""},{label:"超级管理员",value:"admin"},{label:"普通用户",value:"customer"}],n={admin:"超级管理员",customer:"普通用户"},i=(a("99af"),[{label:"启用",value:1},{label:"禁用",value:0}]),l=[{label:"全部",value:""}].concat(i),d=a("b775");function c(e){return Object(d["a"])({url:"/v1/user/list",method:"get",params:e})}function u(e){return Object(d["a"])({url:"/v1/user/add",method:"post",data:e})}function m(e){return Object(d["a"])({url:"/v1/user/modify",method:"post",data:e})}var b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{top:"20vh",width:"600px",title:e.title,visible:e.visible},on:{close:e.close}},[a("el-form",{ref:"form",staticClass:"account-form",attrs:{disabled:e.disabled,model:e.form,"label-width":"120px",rules:e.rules}},["add"!==e.mode?a("el-form-item",{attrs:{prop:"account",label:"账号"}},[e._v(" "+e._s(e.form.account)+" ")]):e._e(),a("el-form-item",{attrs:{prop:"name",label:"账号"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{prop:"password",label:"密码"}},[a("el-input",{attrs:{"show-password":!e.disabled},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"角色"}},["add"===e.mode?a("span",[e._v("超级管理员")]):a("span",[e._v(" "+e._s(e.roleMap[e.form.roleCode]||"超级管理员"))])]),a("el-form-item",{attrs:{prop:"status",label:"状态"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.enableStatus,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1),e.disabled?e._e():a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取消")]),a("el-button",{attrs:{loading:e.btnLoading,type:"primary"},on:{click:e.submitForm}},[e._v("确定")])],1)],1)},f=[],p=a("5530"),h=a("1da1"),v=(a("46f4"),a("384e"),a("f494")),g=a.n(v),w=(a("60e6"),a("6ac5")),O=a.n(w),E=(a("96cf"),a("b0c0"),a("bc5f")),T=a("61f7"),j={components:{"el-radio-group":O.a,"el-radio":g.a},mixins:[E["a"]],data:function(){var e=function(e,t,a){t||a(new Error(Object(T["d"])("密码"))),Object(T["e"])(t)?a():a(new Error("密码必须包含英文和数字且长度为6-20位"))};return{roleMap:n,enableStatus:i,form:{account:"",name:"",password:"",status:1,roleCode:""},rules:{name:[{required:!this.disabled,message:Object(T["d"])("姓名"),trigger:"blur"}],password:[{required:!this.disabled,validator:e,trigger:"blur"}]}}},methods:{setFormData:function(){console.log("新增");var e=this.data;this.form={account:e.userId,name:e.name,phone:e.phone,password:e.passwd,status:e.enable,roleCode:e.roleCode}},handleSubmit:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var a,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.form,o={name:a.name,phone:a.phone,passwd:a.password,enable:a.status,roleCode:"admin"},console.log(o),r="add"===e.mode?"确认新增该账号？":"确认提交本次对账号的编辑？",e.$confirm(r,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("add"!==e.mode){t.next=5;break}return t.next=3,u(o).then((function(t){e.$message({message:"提交成功",type:"success"}),console.log(t),e.close(),e.$emit("submit")})).catch((function(){}));case 3:t.next=8;break;case 5:if("edit"!==e.mode){t.next=8;break}return t.next=8,m(Object(p["a"])(Object(p["a"])({},o),{},{userId:e.data.userId})).then((function(t){e.$message({message:"提交成功",type:"success"}),console.log(t),e.close(),e.$emit("submit")})).catch((function(){}));case 8:case"end":return t.stop()}}),t)}))));case 5:case"end":return t.stop()}}),t)})))()}}},k=j,_=(a("8af2"),a("2877")),C=Object(_["a"])(k,b,f,!1,null,"71c022d2",null),x=C.exports,y=a("6176"),$={components:{AddEdit:x},data:function(){var e=this;return{roleList:s,enableStatusAll:l,getList:c,dialogTitle:{add:"新增账号",edit:"编辑账号",check:"查看"},addEditObj:{data:{},visible:!1,mode:"add"},searchForm:{enable:"",roleCode:"",name:"",phone:""},formList:[{label:"状态",prop:"enable",sources:l,type:"select"},{label:"角色",prop:"roleCode",sources:s,type:"select"},{label:"账号",prop:"name"}],actionList:[{label:"新增账号",click:function(){e.addNew()},epermission:this.$PAGEBUTTON.SYSTEM.ACCOUNT.ADD}],columList:[{label:"账号",prop:"userId",minWidth:120,fixed:"left"},{label:"账号",prop:"name",minWidth:100},{label:"角色",prop:"role",minWidth:100},{label:"状态",prop:"enable",minWidth:100},y["a"]]}},methods:{edit:function(e){this.addEditObj.data=e,this.addEditObj.visible=!0,this.addEditObj.mode="edit",console.log("edit")},check:function(e){this.addEditObj.data=e,this.addEditObj.visible=!0,this.addEditObj.mode="check",console.log("CHECK")},addNew:function(){this.addEditObj.visible=!0,this.addEditObj.mode="add",console.log("newnew")},requestTable:function(e){console.log(e),this.$refs.table&&this.$refs.table.requestData(e),console.log(this.searchForm)}}},S=$,A=Object(_["a"])(S,o,r,!1,null,"04688318",null);t["default"]=A.exports},"46f4":function(e,t,a){},"60e6":function(e,t,a){},"8af2":function(e,t,a){"use strict";a("d0fa")},d0fa:function(e,t,a){}}]);